kind: pipeline
type: docker
name: auto-and-manual-steps

steps:
  # 第1个step - 自动触发
  - name: auto-step
    image: alpine
    commands:
      - echo "=== 自动触发步骤 ==="

  # 第2个step - 手动触发
  - name: manual-step-1
    image: alpine
    commands:
      - echo "=== 第一个手动步骤 ==="
    when:
      event: [ manual ]
    depends_on: [ auto-step ]

  # 第3个step - 手动触发
  - name: manual-step-2
    image: alpine
    commands:
      - echo "=== 第二个手动步骤 ==="
    when:
      event: [ manual ]
    depends_on: [ manual-step-1 ]
